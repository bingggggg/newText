<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>入库操作</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta http-equiv="Access-Control-Allow-Origin" content="*">
    <link rel="stylesheet" href="../layui/css/layui.css" media="all"/>
    <link rel="stylesheet" href="../css/main.css" media="all"/>
    <link rel="stylesheet" href="../css/common.css"/>
</head>
<body>

<fieldset class="layui-elem-field layui-field-title" style="margin-top: 20px;">
    <legend>仓库选择</legend>
</fieldset>
<form class="layui-form" action="">
    <div class="layui-form-item" style="float: left;clear: none">
        <label class="layui-form-label">仓库名</label>
        <div class="layui-input-inline">
            <input type="text" name="title" required="" lay-verify="required" placeholder="请输入仓库名" autocomplete="off" class="layui-input">
        </div>
    </div>
    <div class="layui-form-item" style="float: left;clear: none">
        <label class="layui-form-label">仓库号</label>
        <div class="layui-input-inline">
            <select name="city" lay-verify="required">
                <option value=""></option>
                <option value="0">仓库1</option>
                <option value="1">仓库2</option>
                <option value="2">仓库2</option>
                <option value="3">仓库2</option>
                <option value="4">仓库2</option>
            </select><div class="layui-unselect layui-form-select"><div class="layui-select-title"><input type="text" placeholder="请选择" value="" readonly="" class="layui-input layui-unselect"><i class="layui-edge"></i></div><dl class="layui-anim layui-anim-upbit"><dd lay-value="0" class="">虾</dd><dd lay-value="1" class="">鱼</dd><dd lay-value="2" class="">龙</dd><dd lay-value="3" class="">人</dd><dd lay-value="4" class="">马</dd></dl></div>
        </div>
    </div>
    <div class="layui-form-item" style="float: left;clear: none">
        <label class="layui-form-label">仓库类型</label>
        <div class="layui-input-inline">
            <select name="city" lay-verify="required">
                <option value=""></option>
                <option value="0">冰冻</option>
                <option value="1">冷藏</option>
                <option value="2">3333</option>

            </select><div class="layui-unselect layui-form-select"><div class="layui-select-title"><input type="text" placeholder="请选择" value="" readonly="" class="layui-input layui-unselect"><i class="layui-edge"></i></div><dl class="layui-anim layui-anim-upbit"><dd lay-value="0" class="">出库查询</dd><dd lay-value="1" class="">入库查询</dd><dd lay-value="2" class="">移库查询</dd></dl></div>
        </div>
    </div>
    <div class="layui-form-item" style="float: left;clear: none">
        <div class="layui-input-block" style="margin-right: 10px">
            <button class="layui-btn" lay-submit="" lay-filter="formDemo">确认添加</button>
        </div>
    </div>
</form>
<fieldset class="layui-elem-field layui-field-title" style="margin-top: 20px;float: left;width: 100%">
    <legend>车载选择</legend>
</fieldset>
<form class="layui-form" action="">
    <div class="layui-form-item" style="float: left;clear: none">
        <label class="layui-form-label">车牌号</label>
        <div class="layui-input-inline">
            <input type="text" name="title" required="" lay-verify="required" placeholder="请输入车牌号" autocomplete="off" class="layui-input">
        </div>
    </div>
    <div class="layui-form-item" style="float: left;clear: none">
        <label class="layui-form-label">商品分类</label>
        <div class="layui-input-inline">
            <select name="city" lay-verify="required">
                <option value=""></option>
                <option value="0">鱼</option>
                <option value="1">虾</option>
                <option value="2">虫子</option>

            </select><div class="layui-unselect layui-form-select"><div class="layui-select-title"><input type="text" placeholder="请选择" value="" readonly="" class="layui-input layui-unselect"><i class="layui-edge"></i></div><dl class="layui-anim layui-anim-upbit"><dd lay-value="0" class="">出库查询</dd><dd lay-value="1" class="">入库查询</dd><dd lay-value="2" class="">移库查询</dd></dl></div>
        </div>
    </div>
    <div class="layui-form-item" style="text-align: right">
        <div class="layui-input-block" style="margin-right: 10px">
            <button class="layui-btn" lay-submit="" lay-filter="formDemo">查询</button>
            <button class="layui-btn layui-btn-primary" lay-submit="" lay-filter="formDemo">清除</button>
        </div>
    </div>

</form>
<div class="gal-panel" style="float: left;width: 100%">
    <div class="gal-panel-header">
        <div class="gal-panel-title">
            选择货物
        </div>
    </div>
    <div class="gal-panel-body">
        <table class="layui-table layui-form">
            <thead>
            <tr>
                <th>仓库名</th>
                <th>出库量</th>
                <th>出库商品</th>
                <th>商品重量</th>
                <th style="width:100px">库存</th>
                <th style="width:100px">入库</th>
                <th>出库时间</th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td>仓库名</td>
                <td>出库量</td>
                <td>出库商品</td>
                <td>商品重量</td>
                <td><label class="stock-txt">10000</label></td>
                <td><input type="text" class="input-move-stock layui-input" value=""/> </td>
                <td>出库时间</td>
            </tr>
            <tr>
                <td>仓库名</td>
                <td>出库量</td>
                <td>出库商品</td>
                <td>商品重量</td>
                <td><label class="stock-txt">10000</label></td>
                <td><input type="text" class="input-move-stock layui-input" value=""/> </td>
                <td>出库时间</td>
            </tr>
            </tbody>
        </table>
    </div>
</div>


<script type="text/javascript" src="../layui/layui.js"></script>
<script>
    layui.use(['layer', 'form', 'jquery'], function () {
        var layer = layui.layer, $ = layui.jquery
                , form = layui.form();
        $(".input-move-stock").keyup(function() {
            var str = /^[0]/g;
            var a = $(this).val();
            var str1 = /[^\d]/g;
            if (str1.test(a)) {
                a = a.replace(/[^\d]/g, "");
                //$(this).val(a);
            }
            if (str.test(a)) {
                a = a.substr(1);
                //alert(a);
            }

            var tr = $(this).parent().parent();

            //库存
            var stock = parseInt($(tr).find(".stock-txt").text());
           // console.log($(this).val());
           // console.log(stock);
            if($(this).val()>stock){
                //layer.alert('加了个图标', {icon: 1});
                layer.msg('已超过库存！');
                //console.log('aaaa');
            }else{
                $(this).val(a);
            }

        });
    });
</script>
</body>
</html>